<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Throwing Shade | Urban Shade Analysis</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Roboto+Mono:wght@700&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #000000;
      color: #ffffff;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      overflow-x: hidden;
    }
    
    /* Landing Section */
    .hero-section {
      position: relative;
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    
    #sunRaysCanvas {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 0;
      background: #1a1a1a;
    }
    
    .hero-content {
      position: relative;
      z-index: 1;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 0;
    }
    
    .header {
      padding: 40px 60px 0;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }
    
    .logo {
      font-size: 28px;
      font-weight: 600;
      color: #95C11F;
      letter-spacing: -0.02em;
    }
    
    .header-info {
      text-align: right;
      color: #cccccc;
      font-size: 14px;
      font-weight: 300;
      line-height: 1.4;
    }
    
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 0 60px;
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
      position: relative;
      z-index: 2;
    }

    /* Minimal text box + per-letter halo */
    .text-panel {
      position: relative;
      background: linear-gradient(180deg, rgba(0,0,0,0.72), rgba(0,0,0,0.66));
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 12px 40px rgba(0,0,0,0.45), inset 0 1px 0 rgba(255,255,255,0.03);
      backdrop-filter: blur(6px) saturate(110%);
      -webkit-backdrop-filter: blur(6px) saturate(110%);
      border-radius: 6px;
      padding: 28px 32px;
      max-width: clamp(360px, 46vw, 640px);
    }
    .text-panel::before {
      content: '';
      position: absolute;
      left: -1px;
      top: 10px;
      bottom: 10px;
      width: 3px;
      background: linear-gradient(180deg, #D9A441 0%, #95C11F 100%);
      box-shadow: 0 0 12px rgba(217, 164, 65, 0.25);
      opacity: 0.9;
    }
    .title, .subtitle, .description {
      text-shadow: 0 1px 1px rgba(0,0,0,0.6), 0 0 6px rgba(0,0,0,0.2);
    }
    .subtitle { letter-spacing: 0.02em; }
    
    .title {
      font-size: clamp(48px, 6vw, 84px);
      font-family: 'Roboto', sans-serif;
      font-weight: 500; /* Roboto Medium */
      color: #ffffff;
      letter-spacing: -0.03em;
      line-height: 0.95;
      margin-bottom: 24px;
    }
    
    .subtitle {
      font-size: 20px;
      font-family: 'Roboto Mono', monospace; /* Key words style */
      font-weight: 700; /* Roboto Mono Bold */
      color: #95C11F;
      margin-bottom: 32px;
      max-width: 600px;
    }
    
    .description {
      font-size: 16px;
      font-weight: 400; /* Roboto Regular */
      color: #cccccc;
      max-width: 500px;
      line-height: 1.7;
      margin-bottom: 48px;
    }
    
    .scroll-indicator {
      position: absolute;
      bottom: 40px;
      left: 60px;
      display: flex;
      align-items: center;
      gap: 12px;
      color: #888888;
      font-size: 12px;
      font-weight: 300;
      cursor: pointer;
      transition: color 0.3s ease;
    }
    
    .scroll-indicator:hover {
      color: #95C11F;
    }
    
    .scroll-arrow {
      width: 1px;
      height: 40px;
      background: #95C11F;
      position: relative;
      overflow: hidden;
    }
    
    .scroll-arrow::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 8px;
      background: #95C11F;
      animation: scroll-pulse 2s infinite ease-in-out;
    }
    
    @keyframes scroll-pulse {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(32px); }
    }
    
    /* About Section */
    .about-section {
      background: #0a0a0a;
      border-top: 1px solid #1f1f1f;
      border-bottom: 1px solid #1f1f1f;
      padding: 28px 60px 16px; /* tighter vertical fit */
    }

    .about-inner {
      max-width: 1200px;
      margin: 0 auto;
    }

    .about-kicker {
      color: #95C11F;
      font-size: 12px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      margin-bottom: 12px;
    }

    .about-title {
      font-size: clamp(28px, 3.6vw, 40px);
      font-weight: 400;
      letter-spacing: -0.01em;
      line-height: 1.15;
      margin-bottom: 10px;
      color: #ffffff;
    }

    .about-layout {
      display: grid;
      grid-template-columns: 1fr;
      gap: 14px;
      align-items: start;
      margin-top: 10px;
    }

    .about-lead {
      color: #bdbdbd;
      font-weight: 300;
      font-size: 16px;
      line-height: 1.8;
      max-width: 900px;
      margin-bottom: 16px;
    }

    .about-grid { display: none; }

    .about-card {
      background: rgba(0, 0, 0, 0.6);
      border: 1px solid #252525;
      padding: 20px;
      transition: border-color 0.25s ease;
    }

    .about-card:hover {
      border-color: #2f2f2f;
    }

    .about-card h3 {
      font-size: 16px;
      font-weight: 500;
      color: #e6e6e6;
      margin-bottom: 10px;
    }

    .about-card p, .about-card li {
      color: #b0b0b0;
      font-size: 14px;
      line-height: 1.7;
    }

    .about-card ul {
      padding-left: 18px;
    }

    .about-visuals {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    .about-right { padding-left: 0; border-left: 0; }

    .howto { padding: 0; margin-bottom: 6px; }
    .howto h3 { font-size: 16px; font-weight: 500; color: #e6e6e6; margin-bottom: 8px; }
    .howto ul { margin-left: 18px; color: #b0b0b0; font-size: 14px; line-height: 1.7; }

    .preview {
      position: relative;
      background: radial-gradient(100% 100% at 0% 0%, #0f0f0f 0%, #0a0a0a 100%);
      border: 1px solid #252525;
      overflow: hidden;
      display: block;
    }

    .preview img {
      width: 100%;
      height: auto;
      display: block;
    }

    .preview-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.65);
      border: 1px solid #333333;
      color: #cfcfcf;
      font-size: 11px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      padding: 4px 8px;
    }

    .preview-caption {
      color: #8a8a8a;
      font-size: 12px;
      padding: 8px 10px 10px;
      border-top: 1px solid #252525;
    }

    .palette-comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }
    .option-label {
      color: #cfcfcf;
      font-size: 13px;
      letter-spacing: 0.02em;
      margin-bottom: 8px;
    }

    .about-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .about-note {
      color: #8a8a8a;
      font-size: 13px;
      font-weight: 300;
    }

    .about-cta {
      margin-left: auto;
    }

    .about-button {
      color: #bdbdbd;
      text-decoration: none;
      font-size: 13px;
      font-weight: 300;
      border: 1px solid #333333;
      padding: 10px 16px;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.02em;
      display: inline-block;
    }

    .about-button:hover { 
      border-color: #95C11F; 
      color: #95C11F; 
    }

    /* Credits Section */
    .credits-section {
      background: #050505;
      border-top: 1px solid #1a1a1a;
      padding: 28px 60px 40px;
    }

    .credits-inner { max-width: 1200px; margin: 0 auto; }
    .credits-kicker {
      color: #95C11F; font-size: 12px; letter-spacing: 0.12em; text-transform: uppercase; margin-bottom: 10px;
    }
    .credits-title { font-size: clamp(24px, 3vw, 34px); font-weight: 500; margin-bottom: 10px; color: #fff; }
    .credits-sub { color: #bdbdbd; font-size: 14px; margin-bottom: 18px; }

    .credits-grid { display: grid; grid-template-columns: 1.1fr 1fr; gap: 18px; }
    .credits-card {
      background: rgba(0,0,0,0.5);
      border: 1px solid #1f1f1f;
      padding: 18px;
    }
    .credits-card h3 { color: #eaeaea; font-size: 16px; font-weight: 500; margin-bottom: 10px; }
    .credits-card p, .credits-card li, .credits-card a { color: #bdbdbd; font-size: 14px; }
    .credits-card a { color: #95C11F; text-decoration: none; }
    .credits-card a:hover { text-decoration: underline; }
    .credits-card ul { padding-left: 18px; }

    .credits-bottom { margin-top: 18px; border-top: 1px solid #1a1a1a; padding-top: 16px; text-align: center; color: #bdbdbd; font-size: 14px; }
    .credits-bottom a { color: #95C11F; text-decoration: none; }
    .credits-bottom a:hover { text-decoration: underline; }

    @media (max-width: 1024px) {
      .credits-section { padding: 22px 40px 32px; }
      .credits-grid { grid-template-columns: 1fr; }
    }
    @media (max-width: 768px) {
      .credits-section { padding: 18px 20px 28px; }
    }

    /* Footer */
    .site-footer {
      background: #040404;
      border-top: 1px solid #161616;
      padding: 16px 24px 24px;
      text-align: center;
      color: #8a8a8a;
      font-size: 13px;
    }
    .site-footer a { color: #95C11F; text-decoration: none; }
    .site-footer a:hover { text-decoration: underline; }

    .about-section a { color: #95C11F; text-decoration: none; }
    .about-section a:hover { text-decoration: underline; }
    .about-resources { color: #8a8a8a; font-size: 13px; margin-top: 16px; }

    /* Map Section */
    .map-section {
      min-height: 100vh;
      background: #000000;
      position: relative;
    }
    
    .map-header {
      background: #000000;
      border-bottom: 1px solid #333333;
      padding: 20px 60px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    
    .map-title {
      font-size: 18px;
      font-weight: 500;
      color: #ffffff;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .back-to-top {
      color: #888888;
      text-decoration: none;
      font-size: 13px;
      font-weight: 300;
      border: 1px solid #333333;
      padding: 8px 16px;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.02em;
    }
    
    .back-to-top:hover {
      border-color: #95C11F;
      color: #95C11F;
    }
    
    .map-container {
      height: calc(100vh - 81px);
      position: relative;
    }
    
    #map {
      height: 100%;
      width: 100%;
    }
    
    /* Map Controls */
    .map-controls {
      position: absolute;
      top: 20px;
      right: 20px;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    /* Zoom hint */
    .zoom-hint {
      position: absolute;
      bottom: 16px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
      background: rgba(0,0,0,0.65);
      border: 1px solid #333333;
      color: #cfcfcf;
      font-size: 12px;
      padding: 6px 10px;
      letter-spacing: 0.02em;
      backdrop-filter: blur(6px);
      display: none;
    }
    .zoom-hint.show { display: block; }
    
    .control-panel {
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(10px);
      border: 1px solid #333333;
      padding: 16px;
      min-width: 280px;
      font-size: 13px;
      color: #cccccc;
    }
    
    .control-title {
      font-weight: 500;
      color: #95C11F;
      margin-bottom: 12px;
      font-size: 14px;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }
    
    .legend-color {
      width: 16px;
      height: 12px;
      border: 1px solid #555555;
    }
    
    /* Info Panel */
    .info-panel {
      position: absolute;
      bottom: 20px;
      left: 20px;
      z-index: 1000;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      border: 1px solid #333333;
      padding: 20px;
      max-width: 400px;
      min-width: 300px;
      transform: translateY(100%);
      opacity: 0;
      transition: all 0.3s ease;
      font-size: 13px;
      line-height: 1.5;
    }
    
    .info-panel.active {
      transform: translateY(0);
      opacity: 1;
    }
    
    .info-title {
      font-size: 16px;
      font-weight: 500;
      color: #95C11F;
      margin-bottom: 12px;
    }
    
    .info-stats {
      color: #cccccc;
      margin-bottom: 16px;
    }
    
    .info-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: none;
      border: none;
      color: #888888;
      font-size: 18px;
      cursor: pointer;
      transition: color 0.3s ease;
    }
    
    .info-close:hover {
      color: #95C11F;
    }
    
    /* Loading Indicator */
    .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1001;
      background: rgba(0, 0, 0, 0.9);
      padding: 20px 30px;
      border: 1px solid #333333;
      color: #95C11F;
      font-size: 14px;
      font-weight: 300;
      opacity: 0;
      transition: opacity 0.3s ease;
      backdrop-filter: blur(10px);
    }
    
    .loading.show {
      opacity: 1;
    }
    
    .loading::after {
      content: '';
      display: inline-block;
      width: 12px;
      height: 12px;
      border: 2px solid transparent;
      border-top: 2px solid #95C11F;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-left: 8px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Leaflet customization */
    .leaflet-tile {
      filter: brightness(0.8) contrast(1.1);
    }
    
    .custom-tooltip {
      background: rgba(0, 0, 0, 0.9) !important;
      border: 1px solid #333333 !important;
      color: #ffffff !important;
      font-family: 'Inter', sans-serif !important;
      font-size: 12px !important;
      line-height: 1.4 !important;
      padding: 8px 12px !important;
      backdrop-filter: blur(5px);
    }
    
    .custom-tooltip::before {
      border-top-color: #333333 !important;
    }
    
    .leaflet-popup-content-wrapper {
      background: rgba(0, 0, 0, 0.95) !important;
      color: #ffffff !important;
      border: 1px solid #333333 !important;
      backdrop-filter: blur(10px);
    }
    
    .leaflet-popup-tip {
      background: rgba(0, 0, 0, 0.95) !important;
      border: 1px solid #333333 !important;
    }
    
    /* Smooth scrolling */
    html {
      scroll-behavior: smooth;
    }
    
    /* Animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .title, .subtitle, .description {
      animation: fadeInUp 1s ease-out forwards;
    }
    
    .subtitle { animation-delay: 0.2s; }
    .description { animation-delay: 0.4s; }
    .scroll-indicator { animation-delay: 0.8s; }
    
    /* Responsive */
    @media (max-width: 1024px) {
      .header, .main-content, .map-header {
        padding-left: 40px;
        padding-right: 40px;
      }
      .text-panel { padding: 24px 28px; max-width: 600px; }
      .about-section { padding: 22px 40px 12px; }
      .about-layout { grid-template-columns: 1fr; gap: 12px; }
      
      .map-controls, .info-panel {
        right: 15px;
        left: 15px;
        max-width: none;
        min-width: auto;
      }
      
      .scroll-indicator {
        left: 40px;
      }
    }
    
    @media (max-width: 768px) {
      .header {
        flex-direction: column;
        gap: 15px;
        align-items: flex-start;
      }
      
      .header-info {
        text-align: left;
      }
      .about-section { padding: 20px 20px 12px; }
      .about-layout { grid-template-columns: 1fr; gap: 10px; }
      .about-visuals { grid-template-columns: 1fr; }
      .about-right { border-left: 0; padding-left: 0; }
      .palette-comparison { grid-template-columns: 1fr; gap: 18px; }
      
      .map-header {
        flex-direction: column;
        gap: 12px;
        align-items: flex-start;
        padding: 16px 24px;
      }
      
      .control-panel {
        padding: 12px;
        min-width: auto;
      }
      
      .scroll-indicator {
        left: 24px;
      }
      
      .header, .main-content, .map-header {
        padding-left: 24px;
        padding-right: 24px;
      }
      .text-panel { padding: 20px; max-width: 92vw; }
    }

    /* City Selector - Elegant SCL Design */
    .city-selector-container {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .city-selector-label {
      font-size: 13px;
      color: #999999;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-weight: 500;
    }

    .city-selector {
      position: relative;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid #333333;
      border-radius: 4px;
      padding: 10px 40px 10px 16px;
      font-size: 15px;
      font-weight: 500;
      color: #95C11F;
      cursor: pointer;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      min-width: 160px;
      transition: all 0.2s ease;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><path fill="%2395C11F" d="M6 8L2 4h8z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 14px center;
      font-family: 'Roboto', sans-serif;
    }

    .city-selector:hover {
      border-color: #95C11F;
      background: rgba(149, 193, 31, 0.05);
    }

    .city-selector:focus {
      outline: none;
      border-color: #95C11F;
      box-shadow: 0 0 0 2px rgba(149, 193, 31, 0.1);
    }

    .city-selector option {
      background: #1a1a1a;
      color: #ffffff;
      padding: 10px;
    }

    /* City Context Badge */
    .city-context {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 5px 12px;
      background: rgba(149, 193, 31, 0.08);
      border: 1px solid rgba(149, 193, 31, 0.2);
      border-radius: 16px;
      font-size: 11px;
      color: #95C11F;
      font-weight: 500;
      letter-spacing: 0.02em;
      text-transform: uppercase;
    }

    @media (max-width: 768px) {
      .city-selector-label { display: none; }
      .city-selector { min-width: 140px; font-size: 14px; }
    }


    /* Data Quality Notice Banner */
    .data-notice {
      background: linear-gradient(135deg, #FFF3CD 0%, #FFF8E1 100%);
      border-left: 4px solid #FFA000;
      color: #664D03;
      padding: 14px 20px;
      margin-bottom: 0;
      font-size: 13px;
      line-height: 1.6;
      display: none;
      position: relative;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .data-notice.visible {
      display: block;
    }

    .data-notice-icon {
      display: inline-block;
      font-weight: bold;
      margin-right: 8px;
      font-size: 16px;
    }

    .data-notice-title {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .data-notice-text {
      margin: 4px 0;
    }

    .data-notice-link {
      color: #CC8000;
      text-decoration: underline;
      cursor: pointer;
      font-weight: 500;
    }

    .data-notice-link:hover {
      color: #996000;
    }

    .data-notice-close {
      position: absolute;
      top: 12px;
      right: 16px;
      background: none;
      border: none;
      font-size: 20px;
      color: #664D03;
      cursor: pointer;
      padding: 0;
      width: 24px;
      height: 24px;
      line-height: 20px;
      opacity: 0.6;
    }

    .data-notice-close:hover {
      opacity: 1;
    }
  </style>
</head>
<body>
  <!-- Hero Section with Animation -->
  <section class="hero-section" id="hero">
    <canvas id="sunRaysCanvas"></canvas>
    
    <div class="hero-content">
      <header class="header">
        <div class="logo">Throwing Shade</div>
        <div class="header-info">
          Lukas Beuster<br>
          Senseable City Lab, MIT<br>
          3D geoinformation, TU Delft
        </div>
      </header>
      
      <main class="main-content">
        <div class="text-panel">
          <h1 class="title">Slim Shady</h1>
          <p class="subtitle">
            Making shade patterns visible<br>
            and actionable
          </p>
          <p class="description">
              When the city heats up, shade is the simplest relief.<br>
              It keeps our streets walkable, our playgrounds safe,<br>
              and offers comfort to the elderly and vulnerable among us. <br> 
              <br>
              This project maps where that shade exists, and where it's missing<br>
             <em>Slim Shady</em>: a smart take (<em>slim</em> means smart in Dutch) 
             on narrow sidewalks, hot streets, and overcomplicated climate plans.<br>
             Shade, served with scientific rigour, and just a enough of an attitude to get things moving.
            </p>
        </div>
      </main>
      
      <div class="scroll-indicator" onclick="scrollToAbout()">
        <div class="scroll-arrow"></div>
        <span>Learn More</span>
      </div>
    </div>
  </section>

  <!-- About / Context Section -->
   <section class="about-section" id="about-section">
  <div class="about-inner">
    <div class="about-kicker">Context</div>
    <h2 class="about-title">What the shade?</h2>
    
    <!-- <p class="about-lead"> -->
    <p>
      Shade is one of the simplest and most effective ways to reduce heat exposure in cities.
      It’s what keeps a walk bearable on a hot day. But not all streets are created equal, and until now,
      city planners haven’t had the tools to see where shade is missing, or how to provide it where it matters most.
    </p>

    <p>
      Shade improves urban comfort by lowering <strong>Mean Radiant Temperature (MRT)</strong>, the key driver of how hot we feel.
      Unlike air temperature, MRT can be directly shaped by urban design: trees, buildings, materials, and geometry.
      In fact, research shows that reducing radiation exposure through shade is often more effective than lowering air temperature alone.
    </p>
    <br>

    <p>
      This map shows the <strong>Shade Availability Index (SAI)</strong>: the percentage of daytime intervals in which a sidewalk
      segment is sufficiently shaded, above a city-specific threshold (<span id="thresholdText">typically 30–50%</span>). <span id="cityAnalysisText">For Amsterdam, we evaluate intervals</span>
      between <strong>09:00 and 18:00</strong> on the summer solstice. We classify SAI into four categories tailored to planning use:
      <strong>Poor</strong> (< 50%), <strong>Acceptable</strong> (50–70%), <strong>Very good</strong> (70–90%), and <strong>Excellent</strong> (≥ 90%).
      The approach draws on the <em>Guidelines for Applying Quantitative Shade Indicators in Urban Planning in Israel</em>
      (Or Aleksandrowicz et al., 2025).
    </p>

    <div class="about-layout">
      <div class="howto">
        <h3>How to use the map</h3>
        <ul>
          <li>Start with the overview to compare neighborhoods.</li>
          <li>Click a neighborhood to zoom to sidewalk detail.</li>
          <li>Color scale: amber → teal → light green → dark green.</li>
          <li>Read the summary to see % of sidewalks by shade level.</li>
        </ul>
      </div>

      <div class="about-right">
        <div class="about-visuals">
          <div class="preview" aria-label="Overview map preview">
            <span class="preview-badge">Overview</span>
            <img src="data/overview_preview.svg" alt="Overview map preview">
            <div class="preview-caption" id="previewCaption">Neighborhoods colored by average sidewalk shade (SAI).</div>
          </div>
          <div class="preview" aria-label="Neighborhood detail preview">
            <span class="preview-badge">Neighborhood</span>
            <img src="data/neighborhood_preview.svg" alt="Neighborhood detail preview">
            <div class="preview-caption">Example neighborhood segments colored by shade level.</div>
          </div>
        </div>
      </div>
    </div>

    <p class="about-resources">
      Related resources: 
      <a href="https://www.hva.nl/onderzoeksresultaten/2020/6/coolkit" target="_blank" rel="noopener">CoolKit</a>
      and 
      <a href="https://oraleks.net.technion.ac.il/files/2025/06/Aleksandrowicz-et-al.-Guidelines-for-Applying-Quantitative-Shade-Indicators.pdf" target="_blank" rel="noopener">Guidelines for Applying Quantitative Shade Indicators in Urban Planning in Israel (Or Aleksandrowicz et&nbsp;al., Derech Tzel, 2025)</a>.
    </p>

    <p>
      Not every sidewalk needs to be shaded, and this map doesn’t make that call. It’s meant as a practical tool to help planners,
      designers, and communities explore where targeted shade provision might have the most impact.
    </p>

    <div class="about-footer">
      <div class="about-note">Built for action, not just analysis.</div>
      <div class="about-cta">
        <a class="about-button" href="#map-section">Continue to Map</a>
      </div>
    </div>
  </div>
</section>

  <!-- Map Section -->
  <section class="map-section" id="map-section">
    <div class="map-header">
      <div class="map-title">
        <span>(Slim) Shady</span>
        <span style="color: #666666;">|</span>
        <span style="color: #95C11F; font-weight: 300;" id="mapSubtitle">Interactive Shade Analysis</span>
      </div>
      <div style="display: flex; align-items: center; gap: 24px;">
        <div class="city-selector-container">
          <span class="city-selector-label">City</span>
          <select id="citySelector" class="city-selector">
            <option value="amsterdam">Amsterdam</option>
            <option value="capetown">Cape Town (Experimental)</option>
          </select>
        </div>
        <a href="#hero" class="back-to-top">↑ Back to Top</a>
      </div>
    </div>
    
    <!-- Data Quality Notice Banner (shown for Cape Town) -->
    <div id="dataQualityNotice" class="data-notice">
      <button class="data-notice-close" onclick="dismissNotice()" aria-label="Dismiss">×</button>
      <div>
        <span class="data-notice-icon">ℹ️</span>
        <span class="data-notice-title">Experimental Data</span>
      </div>
      <div class="data-notice-text">
        Cape Town analysis uses preliminary data from non-authoritative sources. 
        Results should be interpreted with caution. 
        <a class="data-notice-link" onclick="showDataQualityModal()">Learn more about data quality</a>
      </div>
    </div>

        <div class="map-container">
      <div id="map"></div>
      
      <!-- Map Controls -->
      <div class="map-controls">
        <div class="control-panel">
          <div class="control-title">Shade Availability Index (SAI)</div>
          <div class="legend-item">
            <div class="legend-color" style="background: #D9A441;"></div>
            <span>Poor Shading (<50%)</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background: #4FA3B6;"></div>
            <span>Acceptable (50–70%)</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background: #95C11F;"></div>
            <span>Very Good (70–90%)</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background: #5B7026;"></div>
            <span>Excellent (≥90%)</span>
          </div>
        </div>
      </div>
      
      <!-- Info Panel -->
      <div class="info-panel" id="infoPanel">
        <button class="info-close" onclick="hideInfoPanel()">×</button>
        <div class="info-title">Neighborhood Details</div>
        <div class="info-stats" id="buurtInfo">
          Click on a neighborhood to view detailed shade analysis...
        </div>
      </div>
      
      <!-- Loading Indicator -->
      <div class="loading" id="loadingIndicator">
        Loading data
      </div>

      <!-- Zoom hint -->
      <div class="zoom-hint" id="zoomHint">Hold Ctrl (⌘ on Mac) + scroll to zoom</div>
    </div>
  </section>

  <!-- Credits / Related Work -->
  <section class="credits-section" id="credits">
    <div class="credits-inner">
      <div class="credits-kicker">Credits</div>
      <h2 class="credits-title">People & Projects</h2>
      <p class="credits-sub">Who's behind the magic, and other goodies to explore</p>

      <div class="credits-grid">
        <div class="credits-card">
          <h3>Lead Researcher</h3>
          <p><strong>Lukas Beuster</strong><br>Research Fellow · PhD Candidate<br>Senseable City Lab, MIT · 3D geoinformation, TU Delft</p>
          <ul>
            <li>Email: <a href="mailto:lbeuster@mit.edu">lbeuster@mit.edu</a></li>
            <li>Website: <a href="https://studiomatter.co/" target="_blank" rel="noopener">studiomatter.co</a></li>
            <li>GitHub: <a href="https://github.com/lukasbeuster/" target="_blank" rel="noopener">lukasbeuster</a></li>
          </ul>
          <br>
          <p><strong>Supervision:</strong><br>
          <a href="https://3d.bk.tudelft.nl/hledoux/" target="_blank" rel="noopener">Hugo Ledoux</a> (TU Delft)<br>
          <a href="https://3d.bk.tudelft.nl/gsclara/" target="_blank" rel="noopener">Clara García‑Sánchez</a> (TU Delft)<br>
          <a href="https://dusp.mit.edu/people/fabio-duarte" target="_blank" rel="noopener">Fabio Duarte</a> (MIT).<br>
          <a href="https://www.ams-institute.org/about-ams/team/research-fellows/titus-venverloo/" target="_blank" rel="noopener">Titus Venverloo</a> (MIT/AMS).<br>
        </p>
        </div>

        <div class="credits-card">
          <h3>Related Work</h3>
          <ul>
            <li>
              <strong>Shady Amsterdam</strong> — a foundational student project on shade mapping in the city.<br>
              <em>Monahan, Tsalapati, Gan, Gao & Andinasari</em> (2024).<br>
              TU Delft Architecture and the Built Environment.<br>
              <a href="https://repository.tudelft.nl/record/uuid:1878b296-b888-4043-a9a6-9050ab3e5723" target="_blank" rel="noopener">Read the report</a><br>
              <em>Supervised by:</em> Hugo Ledoux & Lukas Beuster
            </li>
            <li>
              <strong>Shade data generator (NL):</strong><br>
              <a href="https://github.com/jsscmnhn/shady_amsterdam" target="_blank" rel="noopener">github.com/jsscmnhn/shady_amsterdam</a>
            </li>
            <li>
              <strong>Shade data generator (Global):</strong><br>
              <a href="https://github.com/lukasbeuster/throwing_shade" target="_blank" rel="noopener">github.com/lukasbeuster/throwing_shade</a>
            </li>
            <li>
              <strong>Preprint — (Slim) Shady:</strong><br>
              The relative role of buildings and trees in urban shade provision for pedestrians.<br>
              <a href="https://doi.org/10.21203/rs.3.rs-6966874/v1" target="_blank" rel="noopener">doi.org/10.21203/rs.3.rs-6966874/v1</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="credits-bottom">
        <strong>Generously supported by:</strong> TU Delft (3D Geoinformation), MIT (Senseable City Lab), Senseable City Amsterdam, AMS Institute, and the City of Amsterdam.<br>
        Additional collaborators and co‑authors as named in the (Slim) Shady preprint.
      </div>
    </div>
  </section>

  <footer class="site-footer">
    <div class="footer-inner">
      Work in progress. Expect updates as we keep refining methods, data, and design.<br>
      Made to create impact: proudly throwing shade (the good kind). If you spot a bug, consider it a sunspot... and <a href="mailto:lbeuster@mit.edu">tell us</a>.<br>
      <br>
      <a href="#hero" class="back-to-top">↑ Back to Top</a>
    </div>
  </footer>


  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="sunrays.js"></script>
  <script src="map.js"></script>
  
  <script>
    // (panel style locked to Bar)
    // Smooth scroll to about section
    function scrollToAbout() {
      document.getElementById('about-section').scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
    }
    
    // Handle canvas resizing when scrolling
    let isHeroVisible = true;
    
    function handleScroll() {
      const heroSection = document.getElementById('hero');
      const heroRect = heroSection.getBoundingClientRect();
      const isCurrentlyVisible = heroRect.bottom > 0 && heroRect.top < window.innerHeight;
      
      if (isCurrentlyVisible !== isHeroVisible) {
        isHeroVisible = isCurrentlyVisible;
        
        // Resize canvas when hero visibility changes
        if (window.resizeCanvas) {
          window.resizeCanvas();
        }
      }
    }
    
    // Optimize scroll listening
    let scrollTimeout;
    window.addEventListener('scroll', () => {
      if (scrollTimeout) {
        clearTimeout(scrollTimeout);
      }
      scrollTimeout = setTimeout(handleScroll, 100);
    });
    
  </script>
</body>
</html>
